datasource db {
  provider = "sqlite"
  url = env("DATABASE_URL") // Parece no necesitar mas esto
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id               Int     @id @default(autoincrement())
  email            String  @unique
  nombre           String
  contrasenia_hash String
  sal              String
  numeroAvatar     Int
  estaEliminado    Boolean @default(false)
  mis_eventos      Event[] @relation("EventosCreados")
  favs             Event[] @relation("EventosFavoritos")
  following        Follow[] @relation("UserFollowing")
  followers        Follow[] @relation("UserFollowers")
}

model Event {
  id          Int              @id @default(autoincrement())
  titulo      String
  descripcion String
  ubicacion   Ubicacion? //ver como se aplica
  imagenes    ImagenDeEvento[] //ver como se aplica
  fechaInicio DateTime
  fechaFin    DateTime
  creador     User?            @relation("EventosCreados", fields: [userId], references: [id])
  userId      Int?
  fans        User[]           @relation("EventosFavoritos")
  estaEliminado    Boolean @default(false)
}

model ImagenDeEvento {
  id      Int    @id @default(autoincrement())
  url     String
  eventId Int
  event   Event  @relation(fields: [eventId], references: [id])
}

model Ubicacion {
  eventId   Int    @id @default(autoincrement())
  latitud   Float
  longitud  Float
  direccion String
  evento    Event  @relation(fields: [eventId], references: [id])
}

model Follow {
  id          Int  @id @default(autoincrement())
  followerId  Int
  followingId Int

  follower    User @relation("UserFollowing", fields: [followerId], references: [id])
  following   User @relation("UserFollowers", fields: [followingId], references: [id])

  @@unique([followerId, followingId])
}
