datasource db {
  provider = "sqlite"
  url = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id               Int       @id @default(autoincrement())
  email            String    @unique
  nombre           String
  contrasenia_hash String
  sal              String
  numeroAvatar     Int
  estaEliminado    Boolean   @default(false)
  mis_eventos      Event[]   @relation("EventosCreados")
  favs             Event[]   @relation("EventosFavoritos")
  reportes         Reporte[] @relation("ReportesCreados")
}

model Event {
  id            Int              @id @default(autoincrement())
  titulo        String
  descripcion   String
  ubicacion     Ubicacion?
  imagenes      ImagenDeEvento[]
  fechaInicio   DateTime
  fechaFin      DateTime
  creador       User?            @relation("EventosCreados", fields: [userId], references: [id])
  userId        Int?
  fans          User[]           @relation("EventosFavoritos")
  reportes      Reporte[]        @relation("EventosReportados")
  estaEliminado Boolean          @default(false)
}

model ImagenDeEvento {
  id      Int    @id @default(autoincrement())
  url     String
  eventId Int
  event   Event  @relation(fields: [eventId], references: [id])
}

model Ubicacion {
  eventId   Int    @id @default(autoincrement())
  latitud   Float
  longitud  Float
  direccion String
  evento    Event  @relation(fields: [eventId], references: [id])
}

model Reporte {
  id              Int      @id @default(autoincrement())
  usuarioEmisor   User     @relation("ReportesCreados", fields: [userId], references: [id])
  userId          Int
  eventoReportado Event    @relation("EventosReportados", fields: [eventId], references: [id])
  eventId         Int
  motivo          String
  descripcion     String
  fecha           DateTime @default(now())
  estado          String
}
